# Chapter 4 스트림 소개

## 스트림이란?
스트림(Streams)은 데이터 처리 연산을 지원하도록 소스에서 추출된 연속된(sequenced) 요소다. 

- **Sequence of elements** : 컬렉션과 마찬가지로 특정 요소 형식으로 이루어진 연속된 값 집합의 인터페이스를 제공한다.
- **Source** : 컬렉션, 배열, I/O등의 자원 등의 데이터 제공 소스로부터 데이터를 소비한다. 정렬된 컬렉션으로 스트림을 생성하면 정렬이 그대로 유지된다. 즉, 리스트로 스트림을 만들면 스트림의 요소는 리스트의 요소와 같은 순서를 유지한다. 
- **데이터 처리 연산** : 함수형 프로그래밍 언어에서 일반적으로 지원하는 연산과 SQL과 비슷한 연산을 지원한다.
  스트림 연산은 순차적 또는 병렬로 실행할 수 있다.  
  
- **Pipelining** : 대부분의 스트림 연산은 스트림 연산끼리 연결해서 커다란 파이프라인을 구성할 수 있도록 스트림 자신을 반환한다.
  연산 파이프라인은 데이터 소스에 적용하는 SQL과 비슷하다.
- **내부 반복** : 반복자를 이용해서 명시적으로 반복하는 컬렉션과 달리 스트림은 내부 반복을 지원한다.

####
> 컬렉션은 자료구조이므로 시간과 공간의 복잡성과 관련된 요소 저장 및 접근 연산이 주를 이룬다.  
> 반면 스트림은 filter, sorted, map 처럼 표현 계산식이 주를 이룬다.  
> 즉, **컬렉션의 주제는 데이터고 스트림의 주제는 계산이다.** 

## 스트림 연산
```java
List<String> names = menu.stream()
                        .filter(dish -> dish.getCalories() > 300)
                        .map(Dish::getName)
                        .limit(3)
                        .count();
```

스트림 이용 과정은 세 가지로 요약할 수 있다.
- 질의를 수행할 데이터 소스 (=menu)
- 스트림 파이프라인을 구성할 중간 연산 연결 (filter, map, limit)
- 스트림 파이프라인을 실행하고 결과를 만들 최종 연산 (count)

### 중간 연산
- 중간 연산은 단말 연산을 스트림 파이프라인에 실행하기 전까지는 아무 연산도 수행하지 않는다. 
- 중간 연산을 합친 다음에 합쳐진 중간 연산을 최종 연산으로 한 번에 처리하기 때문이다.
- ex) filter, map, limit, sorted, distinct

### 최종 연산
- 최종 연산은 스트림 파이프 라인에 결과를 도출한다. 
- ex) forEach, count, collect